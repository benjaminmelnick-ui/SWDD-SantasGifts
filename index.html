<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Galactic Gift Unwrapping</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: radial-gradient(circle at top, #1b1f3b, #000);
      color: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .container {
      text-align: center;
      background: rgba(20, 20, 30, 0.9);
      border: 2px solid #c1121f;
      border-radius: 12px;
      padding: 30px;
      width: 360px;
      box-shadow: 0 0 25px rgba(193, 18, 31, 0.6);
    }

    h1 {
      margin-top: 0;
      color: #ffd700;
      text-shadow: 0 0 10px #ff0000;
    }

    .subtitle {
      font-size: 0.9em;
      opacity: 0.85;
      margin-bottom: 20px;
    }

    .rolls {
      margin-bottom: 15px;
      font-size: 1.1em;
    }

    button {
      background: linear-gradient(135deg, #c1121f, #780000);
      color: white;
      border: none;
      padding: 14px 22px;
      font-size: 1.1em;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(255, 0, 0, 0.7);
      transition: transform 0.1s, box-shadow 0.1s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 18px rgba(255, 0, 0, 1);
    }

    button:disabled {
      background: #555;
      cursor: not-allowed;
      box-shadow: none;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #444;
      border-radius: 8px;
      min-height: 60px;
      background: rgba(0, 0, 0, 0.6);
    }

    .roll-number {
      font-size: 2em;
      color: #00e5ff;
      text-shadow: 0 0 10px #00e5ff;
    }

    .gift {
      margin-top: 10px;
      font-size: 1.1em;
      color: #7CFFB2;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéÑ Galactic Gift Roll üéÑ</h1>
    <div class="subtitle">Roll the d20 and receive your destiny</div>

    <div class="rolls">
      Rolls Remaining: <span id="rollsLeft">3</span>
    </div>

    <button id="rollBtn">üé≤ Roll the d20</button>

    <div class="result" id="resultBox">
      Awaiting roll...
    </div>
  </div>

  <script>
    /************* DM CONFIG *************/
    const MAX_ROLLS = 3; // <-- CHANGE THIS FOR REWARDS
    const gifts = [
      "Lightsaber Crystal (Kyber Shard)",
      "Festive Healing Stims (3)",
      "Snow-Wrapped Cloak of Resistance",
      "Prototype Blaster Mod (+1 damage once per combat)",
      "Holiday Tech Toolkit",
      "Mini Astromech Companion",
      "Force-Infused Candy Cane (Consumable)",
      "Wookiee Wool Winter Armor",
      "Credits Cache (500 cr)",
      "Sith-Holiday Relic (Dark Side Trinket)",
      "Thermal Detonator (Festive Paint)",
      "Force Snowglobe (Minor Utility Item)",
      "Jedi-Holiday Robes",
      "Starship Stocking Stuffer Upgrade",
      "Frostbound Vibroknife",
      "Rebel Gift Package",
      "Imperial Gift Crate",
      "Mandalorian Trinket",
      "Holo-Santa Blessing (Advantage once)",
      "Mystery Force Artifact"
    ];
    /*************************************/

    // Generate or retrieve player ID
    let playerId = localStorage.getItem("giftPlayerId");
    if (!playerId) {
      playerId = "player-" + Math.random().toString(36).substring(2);
      localStorage.setItem("giftPlayerId", playerId);
    }

    const rollsKey = playerId + "-rolls";
    let rollsLeft = localStorage.getItem(rollsKey);

    if (rollsLeft === null) {
      rollsLeft = MAX_ROLLS;
      localStorage.setItem(rollsKey, rollsLeft);
    } else {
      rollsLeft = parseInt(rollsLeft);
    }

    const rollsLeftSpan = document.getElementById("rollsLeft");
    const rollBtn = document.getElementById("rollBtn");
    const resultBox = document.getElementById("resultBox");

    function updateUI() {
      rollsLeftSpan.textContent = rollsLeft;
      if (rollsLeft <= 0) {
        rollBtn.disabled = true;
        resultBox.innerHTML = "üéÅ All gifts claimed. The Force is satisfied.";
      }
    }

    rollBtn.addEventListener("click", () => {
      if (rollsLeft <= 0) return;

      const roll = Math.floor(Math.random() * 20) + 1;
      const gift = gifts[roll - 1];

      rollsLeft--;
      localStorage.setItem(rollsKey, rollsLeft);

      resultBox.innerHTML = `
        <div class="roll-number">üé≤ ${roll}</div>
        <div class="gift">üéÅ ${gift}</div>
      `;

      updateUI();
    });

    updateUI();
  </script>
</body>
</html>
